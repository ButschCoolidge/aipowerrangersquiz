<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI or not AI?</title>
  <style>
    /* ASCII-Canvas */
    #ascii-canvas {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; z-index: 0;
      pointer-events: none; background: #000;
    }
    body {
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; overflow: hidden;
      font-family: system-ui, sans-serif; background: #000;
    }
    /* Quiz-Container */
    #quiz-container {
      position: relative; z-index: 1;
      background: rgba(255,255,255,0.9); backdrop-filter: blur(4px);
      padding: 2rem; border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      text-align: center; width: 320px;
    }
    #quiz-container img {
      max-width: 100%; height: auto;
      border-radius: 0.5rem; margin: 1rem auto;
      display: block;
    }
    #question-number { margin-bottom: 1rem; font-weight: bold; }
    button {
      padding: 0.8rem 1.2rem; margin: 0.5rem;
      font-size: 1rem; border: none; border-radius: 0.5rem;
      cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      background: #007bff; color: #fff; transition: transform 0.15s;
    }
    button:hover { transform: translateY(-2px); }
    #info { margin: 1rem 0; font-size: 1rem; }
    #next-btn, #restart-btn { display: none; }
    #imprint-link {
      position: absolute; bottom: 8px; right: 8px;
      font-size: 0.75rem; color: #888; text-decoration: none;
    }
    #imprint-link:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <canvas id="ascii-canvas"></canvas>
  <div id="quiz-container">
    <h1>AI or not AI?</h1>
    <div id="score">Punktzahl: <span id="score-value">0</span></div>
    <div id="question-number"></div>
    <img id="question-image" src="" alt="Quiz Bild">
    <div id="buttons">
      <button id="ai-btn">AI</button>
      <button id="monster-btn">NOT AI</button>
    </div>
    <div id="info"></div>
    <button id="next-btn">Nächstes</button>
    <button id="restart-btn">Neu starten</button>
    <a id="imprint-link" href="imprint.html">Impressum</a>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Bild-Konfiguration inkl. AI bis images00047
      const imageConfig = [
        {filename:'images00001.jpg',answer:'monster',name:'Loyax',url:'https://powerrangers.fandom.com/wiki/Loyax'},
        {filename:'images00002.jpg',answer:'monster',name:'Mad Mike',url:'https://powerrangers.fandom.com/wiki/Mad_Mike_the_Pizza_Chef'},
        {filename:'images00003.jpg',answer:'monster',name:'Rykon',url:'https://powerrangers.fandom.com/wiki/Rykon'},
        {filename:'images00004.jpg',answer:'monster',name:'Splitface',url:'https://powerrangers.fandom.com/wiki/Splitface'},
        {filename:'images00005.jpg',answer:'monster',name:'Centiback',url:'https://powerrangers.fandom.com/wiki/Centiback'},
        {filename:'images00006.jpg',answer:'monster',name:'Repellator',url:'https://powerrangers.fandom.com/wiki/Repellator'},
        {filename:'images00007.jpg',answer:'monster',name:'Machine Beast Tamer Keris',url:'https://powerrangers.fandom.com/wiki/Machine_Beast_Tamer_Keris'},
        {filename:'images00008.jpg',answer:'monster',name:'Deadwood',url:'https://powerrangers.fandom.com/wiki/Deadwood'},
        {filename:'images00009.jpg',answer:'monster',name:'Count Nocturne',url:'https://powerrangers.fandom.com/wiki/Count_Nocturne'},
        {filename:'images00010.jpg',answer:'monster',name:'Hatchasaurus',url:'https://powerrangers.fandom.com/wiki/Hatchasaurus'},
        {filename:'images00011.jpg',answer:'monster',name:'Mouthpiece',url:'https://powerrangers.fandom.com/wiki/Mouthpiece'},
        {filename:'images00012.jpg',answer:'monster',name:'Numbor',url:'https://powerrangers.fandom.com/wiki/Numbor'},
        {filename:'images00013.jpg',answer:'monster',name:'Ringbah',url:'https://powerrangers.fandom.com/wiki/Ringbah'},
        {filename:'images00014.jpg',answer:'monster',name:'Skelekron',url:'https://powerrangers.fandom.com/wiki/Skelekron'},
        {filename:'images00015.jpg',answer:'monster',name:'Turkey Jerk',url:'https://powerrangers.fandom.com/wiki/Turkey_Jerk'},
        // AI-Bilder
        {filename:'images00016.jpg',answer:'ai'},{filename:'images00017.jpg',answer:'ai'},{filename:'images00018.jpg',answer:'ai'},
        {filename:'images00019.jpg',answer:'ai'},{filename:'images00020.jpg',answer:'ai'},{filename:'images00021.jpg',answer:'ai'},
        {filename:'images00022.jpg',answer:'ai'},{filename:'images00023.jpg',answer:'ai'},{filename:'images00024.jpg',answer:'ai'},
        {filename:'images00025.jpg',answer:'ai'},{filename:'images00026.jpg',answer:'ai'},{filename:'images00027.jpg',answer:'ai'},
        {filename:'images00037.jpg',answer:'ai'},{filename:'images00038.jpg',answer:'ai'},{filename:'images00039.jpg',answer:'ai'},
        {filename:'images00040.jpg',answer:'ai'},{filename:'images00041.jpg',answer:'ai'},{filename:'images00042.jpg',answer:'ai'},
        {filename:'images00043.jpg',answer:'ai'},{filename:'images00044.jpg',answer:'ai'},{filename:'images00045.jpg',answer:'ai'},
        {filename:'images00046.jpg',answer:'ai'},{filename:'images00047.jpg',answer:'ai'},
        // weitere Monster
        {filename:'images00028.jpg',answer:'monster',name:'Hate Master',url:'https://powerrangers.fandom.com/wiki/Hate_Master'},
        {filename:'images00029.jpg',answer:'monster',name:'Bratboy',url:'https://powerrangers.fandom.com/wiki/Farkas_Bulkmeier'},
        {filename:'images00030.jpg',answer:'monster',name:'Debo Kokodoko',url:'https://powerrangers.fandom.com/wiki/Debo_Kokodoko'}
      ];
      // Pools
      const aiPool = imageConfig.filter(c => c.answer === 'ai');
      const moPool = imageConfig.filter(c => c.answer === 'monster');
      // Zufällige AI-Anzahl (30-65%)
      const minAI = Math.ceil(0.3 * 15), maxAI = Math.floor(0.65 * 15);
      const aiCount = Math.floor(Math.random() * (maxAI - minAI + 1)) + minAI;
      function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }
      const aiSelected = shuffle(aiPool).slice(0, aiCount);
      const moSelected = shuffle(moPool).slice(0, 15 - aiCount);
      // Sequenz mit max 4 gleichen in Folge
      let seq = [], last = null, run = 0;
      for (let i = 0; i < 15; i++) {
        let pickAI;
        if (run >= 4) {
          pickAI = last === 'monster';
        } else if (aiSelected.length === 0) {
          pickAI = false;
        } else if (moSelected.length === 0) {
          pickAI = true;
        } else {
          pickAI = Math.random() < 0.5;
        }
        const item = pickAI ? aiSelected.pop() : moSelected.pop();
        seq.push(item);
        if (item.answer === last) run++; else { last = item.answer; run = 1; }
      }
      const quizDataFinal = seq;

      // ASCII-Canvas & Maske
      const canvas = document.getElementById('ascii-canvas'), ctx = canvas.getContext('2d');
      let w, h, cols, rows, time = 0;
      const fontSize = 12, charsSet = ' .:-=+*#%@';
      const maskGif = new Image(); maskGif.src = 'images/mask.gif';
      function resizeC() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; cols = Math.ceil(w / fontSize); rows = Math.ceil(h / fontSize); }
      window.addEventListener('resize', resizeC); resizeC();
      function draw() {
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = 'rgba(0,255,200,0.1)'; ctx.font = `${fontSize}px monospace`;
        for (let y = 0; y < rows; y++) {
          const offs = Math.sin(y * 0.2 + time) * 20;
          for (let x = 0; x < cols; x++) {
            ctx.fillText(charsSet.charAt(Math.floor(Math.random() * charsSet.length)), x * fontSize + offs, y * fontSize + fontSize);
          }
        }
        ctx.globalCompositeOperation = 'destination-in'; if (maskGif.complete) ctx.drawImage(maskGif, 0, 0, w, h);
        ctx.globalCompositeOperation = 'source-over'; time += 0.01;
        requestAnimationFrame(draw);
      }
      draw();

      // Quiz-Logik
      let idx = 0, score = 0;
      const imgEl = document.getElementById('question-image'), scoreEl = document.getElementById('score-value'),
            qNumEl = document.getElementById('question-number'), infoEl = document.getElementById('info'),
            aiBtn = document.getElementById('ai-btn'), moBtn = document.getElementById('monster-btn'),
            nextBtn = document.getElementById('next-btn'), restartBtn = document.getElementById('restart-btn');
      const messages = [
        'Nicht schlimm, auch ein blindes Huhn findet mal ein Korn – oh ...',
        'Nicht jeder braucht Nerdpower.',
        'Noch Luft nach oben!',
        'Keep trying!',
        'Solide Leistung.',
        'Ganz okay!',
        'Nicht übel!',
        'Gut im Training!',
        'Starkes Ergebnis!',
        'Wow, fast perfekt!',
        'Fast Unschlagbar!',
        'Hervorragend!',
        'Verdammt gut. Dir kann man (fast) nichts vormachen.',
        'Königsklasse!',
        'Unerreichter Meister!',
        'Be honest: Powerrangers Nerd oder bist du eine KI?! Glückwunsch!'
      ];
      function showQuestion() {
        const q = quizDataFinal[idx]; imgEl.src = `images/${q.filename}`;
        qNumEl.textContent = `Frage ${idx+1} von 15`;
        aiBtn.disabled = moBtn.disabled = false;
        infoEl.textContent = '';
        nextBtn.style.display = 'none'; restartBtn.style.display = 'none'; scoreEl.textContent = score;
      }
      function handleAnswer(choice) {
        aiBtn.disabled = moBtn.disabled = true;
        const q = quizDataFinal[idx];
        if (choice === 'ai' && q.answer === 'ai') {
          score++; scoreEl.textContent = score; infoEl.textContent = 'Richtig! AI.';
        } else if (choice === 'monster' && q.answer === 'monster') {
          score++; scoreEl.textContent = score;
          infoEl.innerHTML = `Richtig! NOT AI: <a href="${q.url}" target="_blank">${q.name}</a>`;
        } else if (choice === 'ai' && q.answer === 'monster') {
          infoEl.innerHTML = `Falsch! NOT AI: <a href="${q.url}" target="_blank">${q.name}</a>`;
        } else { infoEl.textContent = 'Falsch! AI.'; }
        nextBtn.style.display = 'inline-block';
      }
      aiBtn.addEventListener('click', () => handleAnswer('ai'));
      moBtn.addEventListener('click', () => handleAnswer('monster'));
      nextBtn.addEventListener('click', () => {
        idx++;
        if (idx < 15) showQuestion(); else {
          aiBtn.style.display = moBtn.style.display = nextBtn.style.display = 'none';
          imgEl.style.display = 'none';
          infoEl.textContent = `${score}/15 – ` + messages[score];
          restartBtn.style.display = 'inline-block';
        }
      });
      restartBtn.addEventListener('click', () => location.reload());
      showQuestion();
    });
  </script>
</body>
</html>
