<!-- 
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
Cheater!
#   .d8888b.  888                        888                     888       
#  d88P  Y88b 888                        888                     888       
#  888    888 888                        888                     888       
#  888        88888b.   .d88b.   8888b.  888888  .d88b.  888d888 888       
#  888        888 "88b d8P  Y8b     "88b 888    d8P  Y8b 888P"   888       
#  888    888 888  888 88888888 .d888888 888    88888888 888     Y8P       
#  Y88b  d88P 888  888 Y8b.     888  888 Y88b.  Y8b.     888      "        
#   "Y8888P"  888  888  "Y8888  "Y888888  "Y888  "Y8888  888     888       
#                                                                          
#                                                                          
#                                                      -->

<!DOCTYPE html>
<html lang="en"> <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI or not AI?</title> <style>
    /* ASCII-Canvas */
    #ascii-canvas {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; z-index: -1; /* Setze z-index auf -1 wie im Impressum */
      pointer-events: none; /* Wichtig, damit Klicks durchgehen */
      background: #000; /* Fallback Hintergrundfarbe */
    }
    body {
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; /* Nutzt die volle Viewport-Höhe */
      /* overflow: hidden; /* Kann Probleme mit Scrollen verursachen, je nach Inhalt. Lassen wir es mal weg, falls Inhalt scrollbar wird */ */

      /* --- BASIS SCHRIFTART (sollte konsistent sein, falls Container-Schrift nicht greift) --- */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Gängige serifenlose Schriften */
      /* --- ENDE BASIS SCHRIFTART --- */

      background: #121212; /* Gleicher dunkler Basis-Hintergrund wie im Impressum */
      color: #e0e0e0; /* Gleiche Standardtextfarbe wie im Impressum */
      padding-bottom: 40px; /* Platz für den Impressum-Link */
    }
    /* Quiz-Container - Angepasste Farben und Leuchten wie im Impressum */
    #quiz-container {
      position: relative; z-index: 1; /* Über dem Canvas */
      /* Hintergrund und Border angepasst an Impressum */
      background: rgba(25, 25, 25, 0.85); /* Halbtransparenter dunkler Hintergrund */
      border: 1px solid #333; /* Rahmenfarbe */
      /* Box-Shadow (Leuchten) angepasst an Impressum */
      box-shadow: 0 0 20px rgba(0, 255, 200, 0.25); /* Grünes/Cyan Leuchten */
      color: #ccc; /* Allgemeine Schriftfarbe im Container */

      backdrop-filter: blur(4px); /* Blur Effekt beibehalten */
      padding: 2rem; border-radius: 1rem;
      text-align: center; width: 320px;

      /* --- SCHRIFTART FÜR DEN CONTAINER UND DIE MEISTEN INHALTE --- */
      font-family: Arial, Verdana, sans-serif; /* Konsistente serifenlose Schrift für Inhalt */
      /* --- ENDE SCHRIFTART FÜR DEN CONTAINER --- */
    }
    /* H1 im Quiz-Container angepasst an H2 im Impressum */
    #quiz-container h1 {
        color: #00ffc8; /* Farbe der H1-Überschrift */
        border-bottom: 1px solid #00ffc8; /* Linie unter H1 */
        padding-bottom: 8px;
        margin-top: 0;
        font-size: 1.8em;
        margin-bottom: 1rem; /* Abstand nach unten */

        /* --- SCHRIFTART EXPLIZIT FÜR H1 (sollte jetzt definitiv greifen) --- */
        font-family: Arial, Verdana, sans-serif; /* Konsistente serifenlose Schrift für H1 */
        /* --- ENDE SCHRIFTART EXPLIZIT FÜR H1 --- */
    }
    #quiz-container img {
      max-width: 100%; height: auto;
      max-height: 250px; /* Begrenzung der Bildhöhe */
      object-fit: contain;
      border-radius: 0.5rem; margin: 1rem auto;
      display: block;
    }
    #question-number { margin-bottom: 1rem; font-weight: bold; /* Farbe kommt von #quiz-container color */ }

    /* Button Farben angepasst an das Schema */
    button {
      padding: 0.8rem 1.2rem; margin: 0.5rem;
      font-size: 1rem; border: none; border-radius: 0.5rem;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3); /* Dunklerer Schatten für Buttons */

      /* Farben angepasst */
      background: #222; /* Dunkler Button Hintergrund */
      color: #00ffc8; /* Textfarbe passend zum Leuchten */
      border: 1px solid #00ffc8; /* Rahmen passend zum Text */

      transition: transform 0.15s, background-color 0.15s, color 0.15s, border-color 0.15s;

      /* --- SCHRIFTART FÜR BUTTONS (optional, erbt sonst vom container) --- */
      font-family: Arial, Verdana, sans-serif; /* Konsistente serifenlose Schrift für Buttons */
      /* --- ENDE SCHRIFTART FÜR BUTTONS --- */
    }
    button:hover {
      transform: translateY(-2px);
      /* Hover Farben angepasst */
      background-color: #00ffc8; /* Beim Hover leuchtend grüner Hintergrund */
      color: #111; /* Dunkle Schrift auf leuchtendem Hintergrund */
      border-color: #00ffc8; /* Rahmen bleibt gleich */
    }
    button:disabled {
      background-color: #6c757d;
      color: #ccc;
      border-color: #6c757d;
      cursor: not-allowed;
      transform: translateY(0);
    }

    #info { margin: 1rem 0; font-size: 1rem; min-height: 2.5em; /* Platz für mehrzeilige Infos */ /* Farbe kommt von #quiz-container color */ }
    #next-btn, #restart-btn { display: none; }

    /* IMPRESSUM LINK STYLING - Farbe angepasst an H1 */
    #imprint-link {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.85rem;
      /* --- FARBE ANGEPASST AN H1 --- */
      color: #00ffc8; /* Gleiche Farbe wie H1 im Quiz-Container */
      /* --- ENDE FARBE ANGEPASST AN H1 --- */
      text-decoration: none;
      z-index: 10;
      padding: 5px 10px;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 5px;

      /* --- SCHRIFTART FÜR IMPRESSUM LINK (optional, erbt sonst vom body oder container) --- */
      font-family: Arial, Verdana, sans-serif; /* Konsistente serifenlose Schrift */
      /* --- ENDE SCHRIFTART FÜR IMPRESSUM LINK --- */
    }
    #imprint-link:hover {
      text-decoration: underline;
      color: #00cc99; /* Etwas abweichender Ton für Hover */
    }

    /* Zusätzliche Farben für Text-Elemente innerhalb des Quiz-Containers, falls benötigt */
    #quiz-container p,
    #quiz-container div,
    #quiz-container span { /* Span hinzugefügt, da Punktzahl in einem Span ist */
        color: #ccc; /* Stellt sicher, dass Text innerhalb des Containers die richtige Farbe hat */
        /* Diese Elemente erben die font-family vom #quiz-container */
    }

  </style>
</head>
<body>
  <canvas id="ascii-canvas"></canvas>
  <div id="quiz-container">
    <h1>AI or not AI?</h1> <div id="score">Score: <span id="score-value">0</span></div> <div id="question-number"></div>
    <div id="buttons">
      <button id="ai-btn">AI</button>
      <button id="monster-btn">NOT AI</button>
    </div>
    <div id="info"></div>
    <button id="next-btn">Next</button> <button id="restart-btn">Restart</button> </div>
  <a id="imprint-link" href="imprint.html" target="_blank">Imprint</a> <script>
    document.addEventListener('DOMContentLoaded', () => {

      // --- ASCII-Canvas & Maske (1:1 Kopie aus Impressum.html Script Block) ---
      // Dieser Code-Block wurde komplett aus dem <script> Bereich der Impressum.html übernommen.
      const canvas = document.getElementById('ascii-canvas'), ctx = canvas.getContext('2d');
      let w, h, cols, rows, time = 0;
      const fontSize = 12, charsSet = ' .:-=+*#%@';
      const maskGif = new Image();
      // WICHTIG: Stellen Sie sicher, dass diese Bilddatei existiert und der Pfad korrekt ist!
      // Wenn Sie keine Maske verwenden möchten, können Sie die Zeilen mit 'maskGif' und 'ctx.drawImage' entfernen/auskommentieren.
      maskGif.src = 'images/mask.gif'; // Beispielpfad, bitte anpassen! Ggf. entfernen, wenn nicht benötigt.

      function resizeC() {
          w = canvas.width = window.innerWidth;
          h = canvas.height = window.innerHeight;
          cols = Math.ceil(w / fontSize);
          rows = Math.ceil(h / fontSize);
      }
      window.addEventListener('resize', resizeC);
      resizeC();

      // Beachte: Die Funktion heißt hier 'draw' wie im ursprünglichen Impressum-Code
      function draw() {
          ctx.clearRect(0, 0, w, h);
          ctx.fillStyle = 'rgba(0,255,200,0.1)'; // Farbe der ASCII-Zeichen
          ctx.font = `${fontSize}px monospace`;
          for (let y = 0; y < rows; y++) {
              const offs = Math.sin(y * 0.2 + time) * 20;
              for (let x = 0; x < cols; x++) {
                  ctx.fillText(charsSet.charAt(Math.floor(Math.random() * charsSet.length)), x * fontSize + offs, y * fontSize + fontSize);
              }
          }
          // Maske nur anwenden, wenn das Bild geladen und vollständig ist
          if (maskGif.complete && maskGif.naturalWidth !== 0) {
              ctx.globalCompositeOperation = 'destination-in';
              ctx.drawImage(maskGif, 0, 0, w, h);
              ctx.globalCompositeOperation = 'source-over';
          }
          time += 0.01;
          requestAnimationFrame(draw); // Rufe 'draw' rekursiv auf
      }

      // Startet das Zeichnen, sobald das Maskenbild geladen ist (oder sofort, wenn es gecached ist)
      // Wenn Sie maskGif.src auskommentiert haben, rufen Sie draw() direkt auf.
      if (maskGif.src.endsWith('undefined') || !maskGif.src.includes("images/mask.gif")) { // Fallback wenn maskGif.src leer oder nicht gesetzt
          draw();
      } else if (maskGif.complete) {
          draw();
      } else {
          maskGif.onload = draw;
          maskGif.onerror = () => {
              console.error("Mask image could not be loaded or is not present. ASCII effect will be drawn without mask."); // Log übersetzt
              draw(); // Draw anyway, but without mask
          }
      }
      // --- Ende ASCII-Canvas & Masken Logik ---


      // --- Quiz Logic ---
      const imageConfig = [
        {filename:'images00001.jpg',answer:'monster',name:'Loyax',url:'https://powerrangers.fandom.com/wiki/Loyax'},
        {filename:'images00002.jpg',answer:'monster',name:'Mad Mike',url:'https://powerrangers.fandom.com/wiki/Mad_Mike_the_Pizza_Chef'},
        {filename:'images00003.jpg',answer:'monster',name:'Rykon',url:'https://powerrangers.fandom.com/wiki/Rykon'},
        {filename:'images00004.jpg',answer:'monster',name:'Splitface',url:'https://powerrangers.fandom.com/wiki/Splitface'},
        {filename:'images00005.jpg',answer:'monster',name:'Centiback',url:'https://powerrangers.fandom.com/wiki/Centiback'},
        {filename:'images00006.jpg',answer:'monster',name:'Repellator',url:'https://powerrangers.fandom.com/wiki/Repellator'},
        {filename:'images00007.jpg',answer:'monster',name:'Machine Beast Tamer Keris',url:'https://powerrangers.fandom.com/wiki/Machine_Beast_Tamer_Keris'},
        {filename:'images00008.jpg',answer:'monster',name:'Deadwood',url:'https://powerrangers.fandom.com/wiki/Deadwood'},
        {filename:'images00009.jpg',answer:'monster',name:'Count Nocturne',url:'https://powerrangers.fandom.com/wiki/Count_Nocturne'},
        {filename:'images00010.jpg',answer:'monster',name:'Hatchasaurus',url:'https://powerrangers.fandom.com/wiki/Hatchasaurus'},
        {filename:'images00011.jpg',answer:'monster',name:'Mouthpiece',url:'https://powerrangers.fandom.com/wiki/Mouthpiece'},
        {filename:'images00012.jpg',answer:'monster',name:'Numbor',url:'https://powerrangers.fandom.com/wiki/Numbor'},
        {filename:'images00013.jpg',answer:'monster',name:'Ringbah',url:'https://powerrangers.fandom.com/wiki/Ringbah'},
        {filename:'images00014.jpg',answer:'monster',name:'Skelekron',url:'https://powerrangers.fandom.com/wiki/Skelekron'},
        {filename:'images00015.jpg',answer:'monster',name:'Turkey Jerk',url:'https://powerrangers.fandom.com/wiki/Turkey_Jerk'},
        {filename:'images00016.jpg',answer:'ai'},{filename:'images00017.jpg',answer:'ai'},{filename:'images00018.jpg',answer:'ai'},
        {filename:'images00019.jpg',answer:'ai'},{filename:'images00020.jpg',answer:'ai'},{filename:'images00021.jpg',answer:'ai'},
        {filename:'images00022.jpg',answer:'ai'},{filename:'images00023.jpg',answer:'ai'},{filename:'images00024.jpg',answer:'ai'},
        {filename:'images00025.jpg',answer:'ai'},{filename:'images00026.jpg',answer:'ai'},{filename:'images00027.jpg',answer:'ai'},
        {filename:'images00037.jpg',answer:'ai'},{filename:'images00038.jpg',answer:'ai'},{filename:'images00039.jpg',answer:'ai'},
        {filename:'images00040.jpg',answer:'ai'},{filename:'images00041.jpg',answer:'ai'},{filename:'images00042.jpg',answer:'ai'},
        {filename:'images00043.jpg',answer:'ai'},{filename:'images00044.jpg',answer:'ai'},{filename:'images00045.jpg',answer:'ai'},
        {filename:'images00046.jpg',answer:'ai'},{filename:'images00047.jpg',answer:'ai'},
        {filename:'images00028.jpg',answer:'monster',name:'Hate Master',url:'https://powerrangers.fandom.com/wiki/Hate_Master'},
        {filename:'images00029.jpg',answer:'monster',name:'Bratboy',url:'https://powerrangers.fandom.com/wiki/Farkas_Bulkmeier'},
        {filename:'images00030.jpg',answer:'monster',name:'Debo Kokodoko',url:'https://powerrangers.fandom.com/wiki/Debo_Kokodoko'}
      ];

      const aiPool = imageConfig.filter(c => c.answer === 'ai');
      const moPool = imageConfig.filter(c => c.answer === 'monster');

      const totalQuestions = 15;
      const minAIRatio = 0.3;
      const maxAIRatio = 0.65;
      const aiCount = Math.floor(Math.random() * (Math.floor(maxAIRatio * totalQuestions) - Math.ceil(minAIRatio * totalQuestions) + 1)) + Math.ceil(minAIRatio * totalQuestions);
      const moCount = totalQuestions - aiCount;

      function shuffleArray(array) {
          for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
          }
          return array;
      }

      let tempAiSelected = shuffleArray([...aiPool]).slice(0, aiCount);
      let tempMoSelected = shuffleArray([...moPool]).slice(0, moCount);

      let generatedSequence = [];
      let lastAnswerType = null;
      let currentRun = 0;
      const MAX_CONSECUTIVE_RUN = 4;

      for (let i = 0; i < totalQuestions; i++) {
          let choiceIsAi;
          const canPickAi = tempAiSelected.length > 0;
          const canPickMo = tempMoSelected.length > 0;

          if (!canPickAi && !canPickMo) {
              console.error("Sequence generation: Both pools are empty before all questions were generated. Index:", i); // Log übersetzt
              break;
          }

          if (currentRun >= MAX_CONSECUTIVE_RUN) {
              choiceIsAi = (lastAnswerType === 'monster'); // Force switch
              if ((choiceIsAi && !canPickAi) || (!choiceIsAi && !canPickMo)) { // If forced choice not possible
                  choiceIsAi = !choiceIsAi; // Take the other type (if possible)
              }
          } else {
              if (!canPickAi) choiceIsAi = false;
              else if (!canPickMo) choiceIsAi = true;
              else choiceIsAi = Math.random() < (tempAiSelected.length / (tempAiSelected.length + tempMoSelected.length)); // Weighted random
          }

          let currentItem;
          if (choiceIsAi) {
              if (canPickAi) currentItem = tempAiSelected.pop();
              else currentItem = tempMoSelected.pop(); // Fallback if AI chosen but empty
          } else {
              if (canPickMo) currentItem = tempMoSelected.pop();
              else currentItem = tempAiSelected.pop(); // Fallback if Monster chosen but empty
          }

          if (!currentItem) {
              console.error(`Sequence generation: Could not select item for question ${i+1}.`); // Log übersetzt
              break;
          }
          generatedSequence.push(currentItem);

          if (currentItem.answer === lastAnswerType) currentRun++;
          else { lastAnswerType = currentItem.answer; currentRun = 1; }
      }

      const quizDataFinal = generatedSequence;
      const quizContainerEl = document.getElementById('quiz-container');

      // Error message translated
      if (quizDataFinal.length !== totalQuestions) {
          quizContainerEl.innerHTML = `<h1>Error</h1><p>The quiz could not be initialized correctly (only ${quizDataFinal.length}/${totalQuestions} questions). Please reload the page.</p><button onclick="location.reload()">Reload</button>`;
          return; // Stop further execution
      }


      // Quiz Logic Continued
      let currentQuestionIndex = 0, score = 0;
      const imgEl = document.getElementById('question-image'),
            scoreEl = document.getElementById('score-value'),
            qNumEl = document.getElementById('question-number'),
            infoEl = document.getElementById('info'),
            aiBtn = document.getElementById('ai-btn'),
            moBtn = document.getElementById('monster-btn'),
            nextBtn = document.getElementById('next-btn'),
            restartBtn = document.getElementById('restart-btn'),
            buttonsDiv = document.getElementById('buttons');

      // End messages translated
      const endMessages = [
          /* 0  */ "Oh dear, no correct answers. But hey, practice makes perfect!",
          /* 1  */ "One point is a start! Try again right away.",
          /* 2  */ "Not bad! You recognized a few.",
          /* 3  */ "Getting better! You're starting to develop an eye for it.",
          /* 4  */ "Well done! You're getting it right more often.",
          /* 5  */ "Great! You're well on your way to becoming an AI detective.",
          /* 6  */ "Very good! Halfway there, keep it up!",
          /* 7  */ "Impressive! You have a good intuition.",
          /* 8  */ "Excellent performance! You're recognizing most of them.",
          /* 9  */ "Outstanding! You're a true connoisseur.",
          /* 10 */ "Wow! Only a few mistakes, almost perfect!",
          /* 11 */ "Incredible! You're an AI bloodhound!",
          /* 12 */ "Phenomenal! Hard to believe how good you are!",
          /* 13 */ "Masterful! Are you perhaps a real AI at work?",
          /* 14 */ "Perfection! You unmasked them all! Or are you an AI yourself?",
          /* 15 */ "Absolute perfection! Unhumanly good! Are you sure you're not an AI?"
      ];

      // --- CORRECTED handleAnswer function ---
      function handleAnswer(choice) {
        // Disable buttons immediately after an answer is given
        aiBtn.disabled = true;
        moBtn.disabled = true;

        const currentQuizItem = quizDataFinal[currentQuestionIndex];
        const correctAnswer = currentQuizItem.answer;
        // Check if it was a 'monster' and if details are available for linking
        const detailsAvailableForMonster = (correctAnswer === 'monster' && currentQuizItem.name && currentQuizItem.url);

        let infoHtml = ''; // Will hold the detailed info (like the monster link or "It was AI.")
        let feedbackText = ''; // Will hold "Correct!" or "Wrong!"

        if (choice === correctAnswer) {
          // User chose the correct answer
          score++;
          scoreEl.textContent = score;
          feedbackText = 'Correct!';

          if (detailsAvailableForMonster) {
              // Correctly identified a monster, show monster details
              infoHtml = `NOT AI: <a href="${currentQuizItem.url}" target="_blank" rel="noopener noreferrer">${currentQuizItem.name}</a>`;
          } else {
              // Correctly identified AI
              infoHtml = 'It was AI.';
          }

        } else {
          // User chose the wrong answer
          feedbackText = 'Wrong!';

          // Regardless of what the user chose, show what the CORRECT answer was
          if (detailsAvailableForMonster) {
              // Should have been a monster, show monster details and link
              infoHtml = `It was NOT AI: <a href="${currentQuizItem.url}" target="_blank" rel="noopener noreferrer">${currentQuizItem.name}</a>`;
          } else {
              // Should have been AI
              infoHtml = 'It was AI.';
          }
        }

        // Combine feedback text and info HTML, then update the info element
        infoEl.innerHTML = feedbackText + ' ' + infoHtml; // Use innerHTML to render the link

        // Always show the "Next" or "Show Results" button after any answer
        nextBtn.style.display = 'inline-block';
        if (currentQuestionIndex >= quizDataFinal.length - 1) {
             // If this was the last question, change the button text
             nextBtn.textContent = "Show Results";
        }
      }
      // --- END CORRECTED handleAnswer function ---


      aiBtn.addEventListener('click', () => handleAnswer('ai'));
      moBtn.addEventListener('click', () => handleAnswer('monster'));

      nextBtn.addEventListener('click', () => {
        currentQuestionIndex++;
        if (currentQuestionIndex < totalQuestions) {
          showQuestion(); // <--- HIER MUSS showQuestion (GROSS Q) stehen!
        } else {
          endQuiz(); // End the quiz if all questions are done
        }
      });

      function endQuiz(customMessage = "") {
        buttonsDiv.style.display = 'none'; // Hide the answer buttons
        nextBtn.style.display = 'none'; // Hide the Next/Show Results button
        imgEl.style.display = 'none'; // Hide the image
        qNumEl.textContent = "Quiz finished!"; // Set the header text

        // Ensure a valid message for the score exists
        const scoreMessage = endMessages[score] !== undefined ? endMessages[score] : (endMessages[endMessages.length -1] || "Well done!"); // Fallback message

        const finalMessage = customMessage || `${score} / ${totalQuestions} correct – ${scoreMessage}`; // Final score message
        infoEl.textContent = finalMessage; // Display the final message
        restartBtn.style.display = 'inline-block'; // Show the restart button
      }

      restartBtn.addEventListener('click', () => location.reload()); // Reload page to restart

      // Start Quiz
      showQuestion(); // <--- HIER MUSS showQuestion (GROSS Q) stehen! Start the first question when the page loads
      // --- End Quiz Logic ---

    });
  </script>
</body>
</html>
