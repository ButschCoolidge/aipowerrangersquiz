<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI or not AI?</title>
  <style>
    /* Canvas als ASCII-Overlay mit GIF-Maske */
    #ascii-canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
      background: #000; /* schwarze Basis für ASCII */
    }
    body {
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; overflow: hidden;
      font-family: system-ui, sans-serif;
      background: #000;
    }
    /* Quiz-Container über dem Canvas */
    #quiz-container {
      position: relative; z-index: 1;
      background: rgba(255,255,255,0.9); backdrop-filter: blur(4px);
      padding: 2rem; border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      text-align: center; width: 320px;
    }
    #quiz-container img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 0 auto 1rem; display: block; }
    button { padding: 0.8rem 1.2rem; margin: 0.5rem; font-size: 1rem; border: none; border-radius: 0.5rem; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.1); background: #007bff; color: #fff; transition: transform 0.15s; }
    button:hover { transform: translateY(-2px); }
    #result { font-size: 1.2rem; margin-top: 1rem; }
  </style>
</head>
<body>
  <canvas id="ascii-canvas"></canvas>
  <div id="quiz-container">
    <h1>AI Fail oder Power Rangers Monster?</h1>
    <div id="score">Punktzahl: <span id="score-value">0</span></div>
    <div id="question-number"></div>
    <img id="question-image" src="" alt="Quiz Bild">
    <div id="buttons">
      <button id="ai-btn">AI Fail</button>
      <button id="monster-btn">Power Rangers Monster</button>
    </div>
    <div id="result" style="display:none;"></div>
    <button id="restart-btn" style="display:none;">Nochmal spielen</button>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Bild-Konfiguration bleibt unverändert
      const imageConfig = [
        { filename: 'images00001.jpg', answer: 'monster' },
        { filename: 'images00002.jpg', answer: 'monster' },
        { filename: 'images00003.jpg', answer: 'monster' },
        { filename: 'images00004.png', answer: 'monster' },
        { filename: 'images00005.jpg', answer: 'monster' },
        { filename: 'images00006.jpg', answer: 'monster' },
        { filename: 'images00007.jpg', answer: 'monster' },
        { filename: 'images00008.jpg', answer: 'monster' },
        { filename: 'images00009.jpg', answer: 'monster' },
        { filename: 'images00010.jpg', answer: 'monster' },
        { filename: 'images00011.jpg', answer: 'monster' },
        { filename: 'images00012.jpg', answer: 'monster' },
        { filename: 'images00013.jpg', answer: 'monster' },
        { filename: 'images00014.jpg', answer: 'monster' },
        { filename: 'images00015.jpg', answer: 'monster' },
        { filename: 'images00016.png', answer: 'ai' },
        { filename: 'images00017.png', answer: 'ai' },
        { filename: 'images00018.png', answer: 'ai' },
        { filename: 'images00019.png', answer: 'ai' },
        { filename: 'images00020.png', answer: 'ai' },
        { filename: 'images00021.png', answer: 'ai' },
        { filename: 'images00022.png', answer: 'ai' },
        { filename: 'images00023.png', answer: 'ai' },
        { filename: 'images00024.png', answer: 'ai' },
        { filename: 'images00025.png', answer: 'ai' },
        { filename: 'images00026.png', answer: 'ai' },
        { filename: 'images00027.png', answer: 'ai' },
        { filename: 'images00028.png', answer: 'ai' },
        { filename: 'images00029.png', answer: 'ai' },
        { filename: 'images00030.png', answer: 'ai' },
        { filename: 'images00031.jpg', answer: 'monster' },
        { filename: 'images00032.jpg', answer: 'monster' },
        { filename: 'images00033.jpg', answer: 'monster' },
        { filename: 'images00034.jpg', answer: 'monster' },
        { filename: 'images00035.jpg', answer: 'monster' },
        { filename: 'images00036.jpg', answer: 'monster' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
        { filename: 'images00037.jpg', answer: 'ai' },
      ];
      const quizData = imageConfig.map(({ filename, answer }) => ({ src: `images/${filename}`, answer })).sort(() => Math.random() - 0.5);

      // ASCII-Canvas mit GIF-Maske
      const canvas = document.getElementById('ascii-canvas');
      const ctx = canvas.getContext('2d');
      let width, height;
      const fontSize = 25;
      const chars = ' .:-=+*#%@';
      let cols, rows, time = 0;

      const maskGif = new Image();
      maskGif.src = 'images/mask.gif';
      maskGif.crossOrigin = 'anonymous';

      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        cols = Math.ceil(width / fontSize);
        rows = Math.ceil(height / fontSize);
      }
      window.addEventListener('resize', resize);
      resize();

      function drawAscii() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = 'rgba(0,255,200,0.1)';
        ctx.font = `${fontSize}px monospace`;
        for (let y = 0; y < rows; y++) {
          const offset = Math.sin((y * 0.2) + time) * 20;
          for (let x = 0; x < cols; x++) {
            const char = chars.charAt(Math.floor(Math.random() * chars.length));
            ctx.fillText(char, x * fontSize + offset, y * fontSize + fontSize);
          }
        }
      }

      function animate() {
        drawAscii();
        // Maske mit GIF
        ctx.globalCompositeOperation = 'destination-in';
        if (maskGif.complete) {
          ctx.drawImage(maskGif, 0, 0, width, height);
        }
        ctx.globalCompositeOperation = 'source-over';
        time += 0.01;
        requestAnimationFrame(animate);
      }
      // Starte Animation sofort, nicht nur nach GIF-Load
      animate();

      // Quiz-Logik
      const imgEl = document.getElementById('question-image');
      const scoreEl = document.getElementById('score-value');
      const qNumEl = document.getElementById('question-number');
      const resEl = document.getElementById('result');
      const btns = document.getElementById('buttons');
      const restart = document.getElementById('restart-btn');
      let idx = 0, score = 0;

      function showQuestion() {
        const q = quizData[idx];
        imgEl.src = q.src;
        qNumEl.textContent = `Frage ${idx+1} von ${quizData.length}`;
      }
      function endQuiz() {
        btns.style.display = 'none';
        imgEl.style.display = 'none';
        resEl.style.display = 'block';
        resEl.textContent = `Fertig! Du hast ${score} von ${quizData.length} Punkten.`;
        restart.style.display = 'inline-block';
      }
      function handleAnswer(choice) {
        if (choice === quizData[idx].answer) { score++; scoreEl.textContent = score; }
        idx++;
        idx < quizData.length ? showQuestion() : endQuiz();
      }
      document.getElementById('ai-btn').addEventListener('click', () => handleAnswer('ai'));
      document.getElementById('monster-btn').addEventListener('click', () => handleAnswer('monster'));
      restart.addEventListener('click', () => location.reload());

      showQuestion();
    });
  </script>
</body>
</html>
